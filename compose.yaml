services:
  tailscaled-yt-dlp:
    build: .
    image: tailscaled-yt-dlp:local
    container_name: tailscaled-yt-dlp
    hostname: tailscaled-yt-dlp
    restart: always
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun
    ports:
      - "8080:8080"
    volumes:
      - ./downloads:/downloads
      - ./data:/data
      - ./tailscale-state:/var/lib/tailscale
    # Headscale credentials are configured via the web setup wizard.
    # Optional env var overrides:
    environment:
       MAX_CONCURRENT_DOWNLOADS: "10"
    #   USER_AGENT: "Mozilla/5.0 ..."
    #   COOKIES_FILE: "/downloads/cookies.txt"
    #   DOWNLOADS_DIR: "/downloads"
    tty: true
    stdin_open: true
